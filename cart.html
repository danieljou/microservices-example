<!DOCTYPE html>
<html lang="fr" class="h-full">
  <head>
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;"
    />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;"
    />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>🛒 LUXE Store - Panier Intelligent</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&amp;family=Orbitron:wght@400;500;600;700;800;900&amp;display=swap"
      rel="stylesheet"
    />
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ["Inter", "system-ui", "sans-serif"],
            },
            colors: {
              primary: {
                50: "#f0f0ff",
                100: "#e5e5ff",
                200: "#d1d1ff",
                300: "#a8a8ff",
                400: "#7a7aff",
                500: "#5D5CDE",
                600: "#4f46e5",
                700: "#4338ca",
                800: "#3730a3",
                900: "#312e81",
              },
              neutral: {
                25: "#fcfcfd",
                50: "#f9fafb",
                100: "#f3f4f6",
                200: "#e5e7eb",
                300: "#d1d5db",
                400: "#9ca3af",
                500: "#6b7280",
                600: "#4b5563",
                700: "#374151",
                800: "#1f2937",
                900: "#111827",
                950: "#030712",
              },
            },
            animation: {
              "fade-in": "fadeIn 0.8s cubic-bezier(0.4, 0, 0.2, 1)",
              "slide-up": "slideUp 0.6s cubic-bezier(0.4, 0, 0.2, 1)",
              "slide-down": "slideDown 0.6s cubic-bezier(0.4, 0, 0.2, 1)",
              "scale-in": "scaleIn 0.5s cubic-bezier(0.4, 0, 0.2, 1)",
              float: "float 3s ease-in-out infinite",
              shimmer: "shimmer 2s linear infinite",
              "bounce-gentle": "bounceGentle 2s ease-in-out infinite",
              "pulse-slow": "pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite",
              wiggle: "wiggle 1s ease-in-out infinite",
              "heart-beat": "heartBeat 1.5s ease-in-out infinite",
              "rotate-3d": "rotate3d 20s linear infinite",
              "glow-pulse": "glowPulse 2s ease-in-out infinite alternate",
              "slide-in-left": "slideInLeft 0.6s cubic-bezier(0.4, 0, 0.2, 1)",
              "slide-in-right":
                "slideInRight 0.6s cubic-bezier(0.4, 0, 0.2, 1)",
              "zoom-in": "zoomIn 0.4s cubic-bezier(0.4, 0, 0.2, 1)",
              flip: "flip 0.6s ease-in-out",
              elastic: "elastic 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55)",
            },
            keyframes: {
              fadeIn: {
                "0%": { opacity: "0", transform: "translateY(30px)" },
                "100%": { opacity: "1", transform: "translateY(0)" },
              },
              slideUp: {
                "0%": { opacity: "0", transform: "translateY(40px)" },
                "100%": { opacity: "1", transform: "translateY(0)" },
              },
              slideDown: {
                "0%": { opacity: "0", transform: "translateY(-40px)" },
                "100%": { opacity: "1", transform: "translateY(0)" },
              },
              scaleIn: {
                "0%": { opacity: "0", transform: "scale(0.8)" },
                "100%": { opacity: "1", transform: "scale(1)" },
              },
              slideInLeft: {
                "0%": { opacity: "0", transform: "translateX(-50px)" },
                "100%": { opacity: "1", transform: "translateX(0)" },
              },
              slideInRight: {
                "0%": { opacity: "0", transform: "translateX(50px)" },
                "100%": { opacity: "1", transform: "translateX(0)" },
              },
              zoomIn: {
                "0%": { opacity: "0", transform: "scale(0.5)" },
                "100%": { opacity: "1", transform: "scale(1)" },
              },
              float: {
                "0%, 100%": { transform: "translateY(0px)" },
                "50%": { transform: "translateY(-8px)" },
              },
              shimmer: {
                "0%": { transform: "translateX(-100%)" },
                "100%": { transform: "translateX(100%)" },
              },
              bounceGentle: {
                "0%, 100%": { transform: "translateY(0)" },
                "50%": { transform: "translateY(-12px)" },
              },
              wiggle: {
                "0%, 100%": { transform: "rotate(-3deg)" },
                "50%": { transform: "rotate(3deg)" },
              },
              heartBeat: {
                "0%": { transform: "scale(1)" },
                "14%": { transform: "scale(1.3)" },
                "28%": { transform: "scale(1)" },
                "42%": { transform: "scale(1.3)" },
                "70%": { transform: "scale(1)" },
              },
              rotate3d: {
                "0%": { transform: "rotateY(0deg)" },
                "100%": { transform: "rotateY(360deg)" },
              },
              glowPulse: {
                "0%": { boxShadow: "0 0 20px rgba(93, 92, 222, 0.3)" },
                "100%": { boxShadow: "0 0 40px rgba(93, 92, 222, 0.6)" },
              },
              flip: {
                "0%": { transform: "rotateY(0)" },
                "100%": { transform: "rotateY(180deg)" },
              },
              elastic: {
                "0%": { transform: "scale(0)" },
                "50%": { transform: "scale(1.2)" },
                "100%": { transform: "scale(1)" },
              },
            },
            boxShadow: {
              glow: "0 0 30px rgba(93, 92, 222, 0.4)",
              "glow-lg": "0 0 50px rgba(93, 92, 222, 0.6)",
              "inner-glow": "inset 0 0 20px rgba(93, 92, 222, 0.1)",
              neo: "8px 8px 16px rgba(0, 0, 0, 0.1), -8px -8px 16px rgba(255, 255, 255, 0.9)",
              "neo-dark":
                "8px 8px 16px rgba(0, 0, 0, 0.3), -8px -8px 16px rgba(255, 255, 255, 0.05)",
              float: "0 20px 40px rgba(0, 0, 0, 0.1)",
              "float-lg": "0 30px 60px rgba(0, 0, 0, 0.15)",
            },
            backdropBlur: {
              xs: "2px",
            },
          },
        },
      };
    </script>
    <style>
      /* Glass Effects */
      .glass-effect {
        background: rgba(255, 255, 255, 0.08);
        backdrop-filter: blur(24px);
        -webkit-backdrop-filter: blur(24px);
        border: 1px solid rgba(255, 255, 255, 0.12);
      }

      .glass-card {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(24px);
        -webkit-backdrop-filter: blur(24px);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      .dark .glass-card {
        background: rgba(17, 24, 39, 0.95);
        border: 1px solid rgba(255, 255, 255, 0.08);
      }

      /* Cart Item Animation */
      .cart-item {
        transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1);
        transform-style: preserve-3d;
      }

      .cart-item:hover {
        transform: translateY(-4px) scale(1.01);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
      }

      /* Advanced Hover Effects */
      .interactive-element {
        position: relative;
        overflow: hidden;
      }

      .interactive-element::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.2),
          transparent
        );
        transition: left 0.5s;
      }

      .interactive-element:hover::before {
        left: 100%;
      }

      /* Morphing Button */
      .morph-button {
        transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        position: relative;
        overflow: hidden;
      }

      .morph-button::after {
        content: "";
        position: absolute;
        width: 0;
        height: 100%;
        top: 0;
        left: 0;
        background: rgba(255, 255, 255, 0.1);
        transition: width 0.4s ease;
      }

      .morph-button:hover::after {
        width: 100%;
      }

      /* Ripple Effect */
      .ripple {
        position: relative;
        overflow: hidden;
      }

      .ripple::after {
        content: "";
        position: absolute;
        width: 0;
        height: 0;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.3);
        transform: translate(-50%, -50%);
        transition: width 0.6s, height 0.6s;
      }

      .ripple:active::after {
        width: 300px;
        height: 300px;
      }

      /* Toast Notifications */
      .toast {
        transform: translateX(100%);
        transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      }

      .toast.show {
        transform: translateX(0);
      }

      /* Quantity Input */
      .quantity-input {
        transition: all 0.3s ease;
      }

      .quantity-input:focus {
        box-shadow: 0 0 0 3px rgba(93, 92, 222, 0.1);
      }

      /* Payment Method Cards */
      .payment-method {
        transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        cursor: pointer;
      }

      .payment-method:hover {
        transform: translateY(-4px) scale(1.02);
        box-shadow: 0 15px 35px rgba(93, 92, 222, 0.2);
      }

      .payment-method.selected {
        transform: scale(1.05);
        box-shadow: 0 20px 40px rgba(93, 92, 222, 0.3);
        border-color: rgb(93, 92, 222);
      }

      /* Progress Steps */
      .step-indicator {
        transition: all 0.5s ease;
      }

      .step-indicator.active {
        background: linear-gradient(45deg, #5d5cde, #764ba2);
        color: white;
        transform: scale(1.1);
      }

      .step-indicator.completed {
        background: linear-gradient(45deg, #10b981, #34d399);
        color: white;
      }

      /* Parallax Background */
      .parallax-bg {
        background: linear-gradient(-45deg, #667eea, #764ba2, #f093fb, #f5576c);
        background-size: 400% 400%;
        animation: gradient 15s ease infinite;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        opacity: 0.05;
      }

      .dark .parallax-bg {
        opacity: 0.02;
      }

      @keyframes gradient {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      /* Floating Elements */
      .floating-element {
        animation: float 6s ease-in-out infinite;
      }

      .floating-element:nth-child(2n) {
        animation-delay: -2s;
      }

      .floating-element:nth-child(3n) {
        animation-delay: -4s;
      }

      /* Custom Scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
      }

      ::-webkit-scrollbar-track {
        background: rgba(0, 0, 0, 0.1);
        border-radius: 4px;
      }

      ::-webkit-scrollbar-thumb {
        background: linear-gradient(45deg, #5d5cde, #764ba2);
        border-radius: 4px;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(45deg, #4f46e5, #667eea);
      }

      /* Magnetic Effect */
      .magnetic {
        transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      }

      /* Security Badge Animation */
      .security-badge {
        animation: glow-pulse 2s ease-in-out infinite alternate;
      }

      @keyframes glow-pulse {
        0% {
          box-shadow: 0 0 15px rgba(16, 185, 129, 0.3);
        }
        100% {
          box-shadow: 0 0 25px rgba(16, 185, 129, 0.6);
        }
      }
    </style>
  </head>
  <body
    class="font-sans antialiased bg-gradient-to-br from-neutral-25 via-white to-primary-50 dark:from-neutral-950 dark:via-neutral-900 dark:to-neutral-800 min-h-screen relative overflow-x-hidden"
  >
    <!-- Animated Background -->
    <div class="parallax-bg"></div>

    <!-- Floating Decoration Elements -->
    <div class="fixed inset-0 pointer-events-none z-0">
      <div
        class="floating-element absolute top-20 left-10 w-32 h-32 bg-gradient-to-br from-primary-200 to-primary-300 dark:from-primary-800 dark:to-primary-900 rounded-full opacity-20 blur-xl"
      ></div>
      <div
        class="floating-element absolute top-40 right-20 w-48 h-48 bg-gradient-to-br from-purple-200 to-pink-300 dark:from-purple-800 dark:to-pink-900 rounded-full opacity-15 blur-2xl"
      ></div>
      <div
        class="floating-element absolute bottom-32 left-1/4 w-24 h-24 bg-gradient-to-br from-blue-200 to-cyan-300 dark:from-blue-800 dark:to-cyan-900 rounded-full opacity-25 blur-xl"
      ></div>
    </div>

    <!-- Toast Notifications -->
    <div
      id="toastContainer"
      class="fixed top-20 right-6 z-[100] space-y-3"
    ></div>

    <!-- AI Shopping Assistant -->
    <div id="aiAssistant" class="fixed bottom-8 right-8 z-[200]">
      <button
        id="aiToggle"
        class="w-16 h-16 bg-gradient-to-r from-primary-500 to-purple-600 rounded-full shadow-glow-lg hover:shadow-[0_0_30px_rgba(93,92,222,0.8)] flex items-center justify-center text-white transition-all duration-300 hover:scale-110 animate-bounce-gentle"
      >
        <i class="fas fa-robot text-2xl"></i>
      </button>
      <div
        id="aiChat"
        class="hidden absolute bottom-20 right-0 w-96 max-w-[90vw] bg-white dark:bg-neutral-900 rounded-3xl shadow-float-lg border-2 border-primary-200 dark:border-primary-800 overflow-hidden"
      >
        <div
          class="bg-gradient-to-r from-primary-500 to-purple-600 p-6 text-white"
        >
          <div class="flex items-center justify-between">
            <div class="flex items-center space-x-3">
              <div
                class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center"
              >
                <i class="fas fa-robot text-lg"></i>
              </div>
              <div>
                <h3 class="font-bold text-lg">LUXE Assistant</h3>
                <p class="text-sm opacity-90">Assistant paiement</p>
              </div>
            </div>
            <button
              id="aiClose"
              class="text-white/80 hover:text-white transition-colors"
            >
              <i class="fas fa-times text-xl"></i>
            </button>
          </div>
        </div>
        <div id="aiMessages" class="h-96 overflow-y-auto p-6 space-y-4">
          <div class="ai-message flex items-start space-x-3">
            <div
              class="w-8 h-8 bg-gradient-to-r from-primary-500 to-purple-600 rounded-full flex items-center justify-center text-white text-sm"
            >
              <i class="fas fa-robot"></i>
            </div>
            <div
              class="bg-neutral-100 dark:bg-neutral-800 rounded-2xl p-4 max-w-xs animate-fade-in"
            >
              <p class="text-sm">
                🛒 Besoin d'aide avec votre commande ? Je peux vous assister
                pour le paiement et la livraison !
              </p>
            </div>
          </div>
        </div>
        <div class="p-4 border-t border-neutral-200 dark:border-neutral-700">
          <div class="flex space-x-3">
            <input
              type="text"
              id="aiInput"
              placeholder="Questions sur votre commande..."
              class="flex-1 px-4 py-3 border border-neutral-300 dark:border-neutral-600 rounded-2xl bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white placeholder-neutral-500 dark:placeholder-neutral-400 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all text-base"
            />
            <button
              id="aiSend"
              class="px-6 py-3 bg-gradient-to-r from-primary-500 to-purple-600 text-white rounded-2xl hover:from-primary-600 hover:to-purple-700 transition-all shadow-glow hover:scale-105"
            >
              <i class="fas fa-paper-plane"></i>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Neural Network Background -->
    <canvas
      id="neuralCanvas"
      class="fixed inset-0 pointer-events-none z-[-1] opacity-30 dark:opacity-20"
    ></canvas>

    <!-- Payment Success Modal -->
    <div
      id="successModal"
      class="fixed inset-0 z-[999] hidden bg-black/50 backdrop-blur-sm flex items-center justify-center"
    >
      <div
        class="bg-white dark:bg-neutral-900 rounded-3xl p-12 shadow-float-lg max-w-md w-full mx-4 text-center animate-zoom-in"
      >
        <div
          class="w-24 h-24 mx-auto mb-8 bg-gradient-to-r from-green-500 to-green-600 rounded-full flex items-center justify-center animate-bounce-gentle"
        >
          <i class="fas fa-check text-white text-4xl"></i>
        </div>
        <h3 class="text-3xl font-bold text-neutral-900 dark:text-white mb-4">
          Paiement réussi !
        </h3>
        <p class="text-neutral-600 dark:text-neutral-400 mb-8 text-lg">
          Votre commande #LUX2024001 a été confirmée. Un email de confirmation
          vous a été envoyé.
        </p>
        <div class="space-y-4">
          <button
            onclick="closeSuccessModal()"
            class="w-full px-8 py-4 bg-gradient-to-r from-primary-500 to-primary-600 text-white rounded-2xl hover:from-primary-600 hover:to-primary-700 transition-all font-semibold shadow-glow hover:scale-105"
          >
            <i class="fas fa-home mr-2"></i>
            Retour à l'accueil
          </button>
          <button
            class="w-full px-8 py-4 border-2 border-primary-500 text-primary-500 rounded-2xl hover:bg-primary-50 dark:hover:bg-primary-900/20 transition-all font-semibold"
          >
            <i class="fas fa-receipt mr-2"></i>
            Voir ma commande
          </button>
        </div>
      </div>
    </div>

    <!-- Navigation Header -->
    <header class="glass-card sticky top-0 z-30 shadow-card animate-slide-down">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-20">
          <div class="flex items-center">
            <div class="flex items-center group">
              <div
                class="w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-700 rounded-2xl flex items-center justify-center shadow-glow group-hover:shadow-glow-lg transition-all duration-300 group-hover:scale-110"
              >
                <i class="fas fa-gem text-white text-xl animate-float"></i>
              </div>
              <h1 class="ml-4 text-3xl font-black gradient-text">LUXE Store</h1>
            </div>
          </div>

          <nav class="hidden md:flex items-center space-x-8">
            <a
              href="index.html"
              class="text-gray-700 dark:text-gray-300 hover:text-primary-500 transition-all duration-300 hover:scale-105 font-medium"
              >Accueil</a
            >
            <a
              href="./product.html"
              class="text-gray-700 dark:text-gray-300 hover:text-primary-500 transition-all duration-300 hover:scale-105 font-medium"
              >Produits</a
            >
            <a
              href="cart.html"
              class="text-gray-700 dark:text-gray-300 hover:text-primary-500 transition-all duration-300 hover:scale-105 font-medium"
              >Cart</a
            >
            <a
              href="#contact"
              class="text-gray-700 dark:text-gray-300 hover:text-primary-500 transition-all duration-300 hover:scale-105 font-medium"
              >Contact</a
            >
          </nav>

          <div class="flex items-center space-x-4">
            <button
              class="interactive-btn p-3 text-gray-600 dark:text-gray-400 hover:text-primary-500 hover:bg-primary-50 dark:hover:bg-primary-900/20 rounded-2xl transition-all duration-300 hover:scale-110"
            >
              <i class="fas fa-search"></i>
            </button>
            <button
              class="interactive-btn relative p-3 text-gray-600 dark:text-gray-400 hover:text-primary-500 hover:bg-primary-50 dark:hover:bg-primary-900/20 rounded-2xl transition-all duration-300 hover:scale-110"
            >
              <i class="fas fa-shopping-bag"></i>
              <span
                class="absolute -top-1 -right-1 w-6 h-6 bg-gradient-to-r from-primary-500 to-primary-600 text-white text-xs rounded-full flex items-center justify-center animate-bounce-soft shadow-glow"
                >0</span
              >
            </button>
            <button
              class="interactive-btn px-6 py-3 bg-gradient-to-r from-primary-500 to-primary-600 text-white rounded-2xl hover:from-primary-600 hover:to-primary-700 transition-all duration-300 hover:scale-105 shadow-glow font-semibold"
            >
              Connexion
            </button>
          </div>
        </div>
      </div>
    </header>

    <div class="px-80 mx-auto sm:px-6 lg:px-8 py-12 relative z-10">
      <!-- Enhanced Page Header -->
      <div class="mb-12 text-center animate-fade-in">
        <div class="mx-auto">
          <h2
            class="text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-neutral-900 via-primary-600 to-purple-600 dark:from-white dark:via-primary-400 dark:to-purple-400 mb-6 animate-slide-up"
          >
            Panier Intelligent
          </h2>
          <p
            class="text-xl text-neutral-600 dark:text-neutral-400 mb-8 animate-slide-up"
            style="animation-delay: 0.2s"
          >
            Finalisez votre commande avec notre système de paiement sécurisé et
            intelligent
          </p>

          <!-- Progress Steps -->
          <div
            class="flex items-center justify-center space-x-8 mb-8 animate-slide-up"
            style="animation-delay: 0.4s"
          >
            <div class="flex items-center">
              <div
                class="step-indicator active w-12 h-12 rounded-full flex items-center justify-center font-bold border-2 border-primary-500"
              >
                1
              </div>
              <span
                class="ml-3 font-semibold text-primary-600 dark:text-primary-400"
                >Panier</span
              >
            </div>
            <div
              class="w-16 h-1 bg-neutral-200 dark:bg-neutral-700 rounded-full"
            >
              <div
                class="w-full h-full bg-gradient-to-r from-primary-500 to-primary-600 rounded-full"
              ></div>
            </div>
            <div class="flex items-center">
              <div
                class="step-indicator w-12 h-12 rounded-full flex items-center justify-center font-bold border-2 border-neutral-300 dark:border-neutral-600 text-neutral-500 dark:text-neutral-400"
              >
                2
              </div>
              <span
                class="ml-3 font-medium text-neutral-500 dark:text-neutral-400"
                >Livraison</span
              >
            </div>
            <div
              class="w-16 h-1 bg-neutral-200 dark:bg-neutral-700 rounded-full"
            ></div>
            <div class="flex items-center">
              <div
                class="step-indicator w-12 h-12 rounded-full flex items-center justify-center font-bold border-2 border-neutral-300 dark:border-neutral-600 text-neutral-500 dark:text-neutral-400"
              >
                3
              </div>
              <span
                class="ml-3 font-medium text-neutral-500 dark:text-neutral-400"
                >Paiement</span
              >
            </div>
          </div>
        </div>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-3 gap-12">
        <!-- Cart Items -->
        <div class="lg:col-span-2 animate-slide-in-left">
          <div
            class="glass-card rounded-3xl p-8 shadow-float border-2 border-primary-100 dark:border-primary-900/30"
          >
            <div class="flex items-center justify-between mb-8">
              <h3
                class="text-2xl font-bold text-neutral-900 dark:text-white flex items-center"
              >
                <i class="fas fa-shopping-cart mr-3 text-primary-500"></i>
                Vos Articles
              </h3>
              <span
                class="text-sm bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 px-4 py-2 rounded-full font-semibold"
              >
                3 articles
              </span>
            </div>

            <!-- Cart Items List -->
            <div id="cartItems" class="space-y-6">
              <!-- Cart items will be inserted here -->
            </div>

            <!-- Promo Code -->
            <div
              class="mt-8 p-6 bg-gradient-to-r from-primary-50 to-purple-50 dark:from-primary-900/20 dark:to-purple-900/20 rounded-2xl border border-primary-200 dark:border-primary-800"
            >
              <h4
                class="text-lg font-semibold text-neutral-900 dark:text-white mb-4 flex items-center"
              >
                <i class="fas fa-ticket-alt mr-3 text-primary-500"></i>
                Code promo
              </h4>
              <div class="flex space-x-3">
                <input
                  type="text"
                  id="promoCode"
                  placeholder="Entrez votre code promo..."
                  class="flex-1 px-4 py-3 border border-neutral-300 dark:border-neutral-600 rounded-xl bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white placeholder-neutral-500 dark:placeholder-neutral-400 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all text-base"
                />
                <button
                  onclick="applyPromoCode()"
                  class="morph-button ripple px-6 py-3 bg-gradient-to-r from-primary-500 to-primary-600 text-white rounded-xl hover:from-primary-600 hover:to-primary-700 transition-all shadow-glow hover:scale-105 font-semibold"
                >
                  Appliquer
                </button>
              </div>
              <div class="mt-4 flex flex-wrap gap-2">
                <span
                  class="text-xs bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 px-3 py-1 rounded-full"
                  >LUXE15 - 15% de réduction</span
                >
                <span
                  class="text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 px-3 py-1 rounded-full"
                  >WELCOME - Livraison gratuite</span
                >
              </div>
            </div>
          </div>
        </div>

        <!-- Order Summary -->
        <div class="animate-slide-in-right">
          <div
            class="glass-card rounded-3xl p-8 shadow-float border-2 border-primary-100 dark:border-primary-900/30 sticky top-32"
          >
            <h3
              class="text-2xl font-bold text-neutral-900 dark:text-white mb-8 flex items-center"
            >
              <i class="fas fa-receipt mr-3 text-primary-500"></i>
              Récapitulatif
            </h3>

            <!-- Order Details -->
            <div class="space-y-4 mb-8">
              <div class="flex justify-between items-center text-lg">
                <span class="text-neutral-600 dark:text-neutral-400"
                  >Sous-total</span
                >
                <span
                  class="font-semibold text-neutral-900 dark:text-white"
                  id="subtotal"
                  >2747€</span
                >
              </div>
              <div class="flex justify-between items-center">
                <span class="text-neutral-600 dark:text-neutral-400"
                  >Livraison</span
                >
                <span class="font-medium text-green-600 dark:text-green-400"
                  >Gratuite</span
                >
              </div>
              <div class="flex justify-between items-center">
                <span class="text-neutral-600 dark:text-neutral-400"
                  >TVA (20%)</span
                >
                <span
                  class="font-medium text-neutral-700 dark:text-neutral-300"
                  id="tax"
                  >549€</span
                >
              </div>
              <div
                class="flex justify-between items-center text-green-600 dark:text-green-400"
                id="promoDiscount"
                style="display: none"
              >
                <span>Réduction promo</span>
                <span class="font-medium">-15%</span>
              </div>
              <div
                class="border-t border-neutral-200 dark:border-neutral-700 pt-4"
              >
                <div
                  class="flex justify-between items-center text-2xl font-bold"
                >
                  <span class="text-neutral-900 dark:text-white">Total</span>
                  <span
                    class="text-primary-600 dark:text-primary-400"
                    id="total"
                    >3296€</span
                  >
                </div>
              </div>
            </div>

            <!-- Security Badges -->
            <div
              class="mb-8 p-4 bg-green-50 dark:bg-green-900/20 rounded-2xl border border-green-200 dark:border-green-800"
            >
              <div class="flex items-center space-x-3">
                <div
                  class="security-badge w-12 h-12 bg-green-500 rounded-full flex items-center justify-center"
                >
                  <i class="fas fa-shield-alt text-white text-xl"></i>
                </div>
                <div>
                  <h4 class="font-semibold text-green-800 dark:text-green-300">
                    Paiement sécurisé
                  </h4>
                  <p class="text-sm text-green-600 dark:text-green-400">
                    Chiffrement SSL 256-bit
                  </p>
                </div>
              </div>
            </div>

            <!-- Payment Methods -->
            <div class="mb-8">
              <h4
                class="text-lg font-semibold text-neutral-900 dark:text-white mb-4"
              >
                Méthodes de paiement
              </h4>
              <div class="grid grid-cols-2 gap-3">
                <div
                  class="payment-method border-2 border-neutral-200 dark:border-neutral-700 rounded-xl p-4 text-center hover:border-primary-500 transition-all"
                  onclick="selectPaymentMethod(this)"
                >
                  <i class="fab fa-cc-visa text-3xl text-blue-600 mb-2"></i>
                  <p class="text-sm font-medium">Visa</p>
                </div>
                <div
                  class="payment-method border-2 border-neutral-200 dark:border-neutral-700 rounded-xl p-4 text-center hover:border-primary-500 transition-all"
                  onclick="selectPaymentMethod(this)"
                >
                  <i
                    class="fab fa-cc-mastercard text-3xl text-red-500 mb-2"
                  ></i>
                  <p class="text-sm font-medium">Mastercard</p>
                </div>
                <div
                  class="payment-method border-2 border-neutral-200 dark:border-neutral-700 rounded-xl p-4 text-center hover:border-primary-500 transition-all"
                  onclick="selectPaymentMethod(this)"
                >
                  <i class="fab fa-paypal text-3xl text-blue-500 mb-2"></i>
                  <p class="text-sm font-medium">PayPal</p>
                </div>
                <div
                  class="payment-method border-2 border-neutral-200 dark:border-neutral-700 rounded-xl p-4 text-center hover:border-primary-500 transition-all"
                  onclick="selectPaymentMethod(this)"
                >
                  <i
                    class="fab fa-apple-pay text-3xl text-gray-800 dark:text-gray-200 mb-2"
                  ></i>
                  <p class="text-sm font-medium">Apple Pay</p>
                </div>
              </div>
            </div>

            <!-- Checkout Button -->
            <button
              onclick="processPayment()"
              class="morph-button ripple w-full bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white font-bold py-6 rounded-2xl transition-all duration-300 hover:scale-105 shadow-glow hover:shadow-glow-lg text-lg"
            >
              <i class="fas fa-lock mr-3"></i>
              Finaliser la commande
            </button>

            <!-- Trust Indicators -->
            <div
              class="mt-6 flex items-center justify-center space-x-6 text-sm text-neutral-500 dark:text-neutral-400"
            >
              <div class="flex items-center">
                <i class="fas fa-undo mr-2"></i>
                Retours 30j
              </div>
              <div class="flex items-center">
                <i class="fas fa-shipping-fast mr-2"></i>
                Livraison 24h
              </div>
              <div class="flex items-center">
                <i class="fas fa-headset mr-2"></i>
                Support 24/7
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-16 relative z-10">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
          <!-- Company Info -->
          <div class="animate-slide-in-left">
            <div class="flex items-center mb-6">
              <div
                class="w-10 h-10 bg-gradient-to-br from-primary-500 to-primary-700 rounded-xl flex items-center justify-center shadow-glow mr-3"
              >
                <i class="fas fa-gem text-white"></i>
              </div>
              <h3 class="text-2xl font-black gradient-text">LUXE Store</h3>
            </div>
            <p class="text-gray-400 mb-6 leading-relaxed">
              La boutique du futur qui révolutionne votre expérience shopping
              avec l'intelligence artificielle et la réalité augmentée.
            </p>
            <div class="flex space-x-4">
              <button
                class="w-10 h-10 bg-gray-800 hover:bg-primary-500 rounded-lg flex items-center justify-center transition-all hover:scale-110"
              >
                <i class="fab fa-facebook-f"></i>
              </button>
              <button
                class="w-10 h-10 bg-gray-800 hover:bg-primary-500 rounded-lg flex items-center justify-center transition-all hover:scale-110"
              >
                <i class="fab fa-twitter"></i>
              </button>
              <button
                class="w-10 h-10 bg-gray-800 hover:bg-primary-500 rounded-lg flex items-center justify-center transition-all hover:scale-110"
              >
                <i class="fab fa-instagram"></i>
              </button>
              <button
                class="w-10 h-10 bg-gray-800 hover:bg-primary-500 rounded-lg flex items-center justify-center transition-all hover:scale-110"
              >
                <i class="fab fa-linkedin-in"></i>
              </button>
            </div>
          </div>

          <!-- Quick Links -->
          <div class="animate-fade-in" style="animation-delay: 0.1s">
            <h4 class="text-lg font-bold mb-6">Liens rapides</h4>
            <ul class="space-y-3">
              <li>
                <a
                  href="#"
                  class="text-gray-400 hover:text-white transition-colors"
                  >À propos</a
                >
              </li>
              <li>
                <a
                  href="#"
                  class="text-gray-400 hover:text-white transition-colors"
                  >Produits</a
                >
              </li>
              <li>
                <a
                  href="#"
                  class="text-gray-400 hover:text-white transition-colors"
                  >Collections</a
                >
              </li>
              <li>
                <a
                  href="#"
                  class="text-gray-400 hover:text-white transition-colors"
                  >Nouveautés</a
                >
              </li>
              <li>
                <a
                  href="#"
                  class="text-gray-400 hover:text-white transition-colors"
                  >Promotions</a
                >
              </li>
            </ul>
          </div>

          <!-- Support -->
          <div class="animate-fade-in" style="animation-delay: 0.2s">
            <h4 class="text-lg font-bold mb-6">Support</h4>
            <ul class="space-y-3">
              <li>
                <a
                  href="#"
                  class="text-gray-400 hover:text-white transition-colors"
                  >Centre d'aide</a
                >
              </li>
              <li>
                <a
                  href="#"
                  class="text-gray-400 hover:text-white transition-colors"
                  >Contact</a
                >
              </li>
              <li>
                <a
                  href="#"
                  class="text-gray-400 hover:text-white transition-colors"
                  >Livraison</a
                >
              </li>
              <li>
                <a
                  href="#"
                  class="text-gray-400 hover:text-white transition-colors"
                  >Retours</a
                >
              </li>
              <li>
                <a
                  href="#"
                  class="text-gray-400 hover:text-white transition-colors"
                  >Garantie</a
                >
              </li>
            </ul>
          </div>

          <!-- Contact -->
          <div class="animate-slide-in-right">
            <h4 class="text-lg font-bold mb-6">Contact</h4>
            <div class="space-y-4">
              <div class="flex items-center">
                <i class="fas fa-map-marker-alt text-primary-500 mr-3"></i>
                <span class="text-gray-400"
                  >123 Rue de l'Innovation, 75001 Paris</span
                >
              </div>
              <div class="flex items-center">
                <i class="fas fa-phone text-primary-500 mr-3"></i>
                <span class="text-gray-400">+33 1 23 45 67 89</span>
              </div>
              <div class="flex items-center">
                <i class="fas fa-envelope text-primary-500 mr-3"></i>
                <span class="text-gray-400">contact@luxestore.com</span>
              </div>
              <div class="flex items-center">
                <i class="fas fa-clock text-primary-500 mr-3"></i>
                <span class="text-gray-400">Support 24/7</span>
              </div>
            </div>
          </div>
        </div>

        <div
          class="border-t border-gray-800 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center"
        >
          <p class="text-gray-400 text-sm">
            © 2024 LUXE Store. Tous droits réservés.
          </p>
          <div class="flex space-x-6 mt-4 md:mt-0">
            <a
              href="#"
              class="text-gray-400 hover:text-white text-sm transition-colors"
              >Mentions légales</a
            >
            <a
              href="#"
              class="text-gray-400 hover:text-white text-sm transition-colors"
              >Confidentialité</a
            >
            <a
              href="#"
              class="text-gray-400 hover:text-white text-sm transition-colors"
              >CGV</a
            >
          </div>
        </div>
      </div>
    </footer>
    <script>
      // Enhanced dark mode detection
      if (
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches
      ) {
        document.documentElement.classList.add("dark");
      }
      window
        .matchMedia("(prefers-color-scheme: dark)")
        .addEventListener("change", (event) => {
          if (event.matches) {
            document.documentElement.classList.add("dark");
          } else {
            document.documentElement.classList.remove("dark");
          }
        });

      // Cart data
      const cartItems = [
        {
          id: 1,
          name: "iPhone 15 Pro Max",
          price: 1299,
          originalPrice: 1399,
          quantity: 1,
          image:
            "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400' viewBox='0 0 400 400'%3E%3Cdefs%3E%3ClinearGradient id='grad1' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23667eea;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23764ba2;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='400' height='400' fill='url(%23grad1)'/%3E%3Ccircle cx='200' cy='180' r='80' fill='rgba(255,255,255,0.1)'/%3E%3Ctext x='50%25' y='40%25' font-size='20' text-anchor='middle' dy='.3em' fill='white' font-family='Arial, sans-serif' font-weight='bold'%3EiPhone 15 Pro Max%3C/text%3E%3Ctext x='50%25' y='65%25' font-size='60' text-anchor='middle' dy='.3em' fill='white' font-family='Arial, sans-serif'%3E📱%3C/text%3E%3Ctext x='50%25' y='85%25' font-size='14' text-anchor='middle' dy='.3em' fill='rgba(255,255,255,0.8)' font-family='Arial, sans-serif'%3EPremium%3C/text%3E%3C/svg%3E",
          description: "Le smartphone le plus avancé d'Apple",
          inStock: true,
        },
        {
          id: 2,
          name: "MacBook Pro M3 Max",
          price: 2499,
          originalPrice: 2699,
          quantity: 1,
          image:
            "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400' viewBox='0 0 400 400'%3E%3Cdefs%3E%3ClinearGradient id='grad3' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23f093fb;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23f5576c;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='400' height='400' fill='url(%23grad3)'/%3E%3Ccircle cx='200' cy='180' r='80' fill='rgba(255,255,255,0.1)'/%3E%3Ctext x='50%25' y='35%25' font-size='18' text-anchor='middle' dy='.3em' fill='white' font-family='Arial, sans-serif' font-weight='bold'%3EMacBook Pro%3C/text%3E%3Ctext x='50%25' y='45%25' font-size='18' text-anchor='middle' dy='.3em' fill='white' font-family='Arial, sans-serif' font-weight='bold'%3EM3 Max%3C/text%3E%3Ctext x='50%25' y='70%25' font-size='60' text-anchor='middle' dy='.3em' fill='white' font-family='Arial, sans-serif'%3E💻%3C/text%3E%3Ctext x='50%25' y='90%25' font-size='14' text-anchor='middle' dy='.3em' fill='rgba(255,255,255,0.8)' font-family='Arial, sans-serif'%3EPromo%3C/text%3E%3C/svg%3E",
          description: "Ordinateur portable professionnel",
          inStock: true,
        },
        {
          id: 3,
          name: "Nike Air Jordan 1 Retro",
          price: 179,
          originalPrice: 199,
          quantity: 1,
          image:
            "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400' viewBox='0 0 400 400'%3E%3Cdefs%3E%3ClinearGradient id='grad4' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23ff9a9e;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23fecfef;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='400' height='400' fill='url(%23grad4)'/%3E%3Ccircle cx='200' cy='180' r='80' fill='rgba(255,255,255,0.1)'/%3E%3Ctext x='50%25' y='35%25' font-size='18' text-anchor='middle' dy='.3em' fill='white' font-family='Arial, sans-serif' font-weight='bold'%3ENike Air Jordan 1%3C/text%3E%3Ctext x='50%25' y='45%25' font-size='18' text-anchor='middle' dy='.3em' fill='white' font-family='Arial, sans-serif' font-weight='bold'%3ERetro%3C/text%3E%3Ctext x='50%25' y='70%25' font-size='60' text-anchor='middle' dy='.3em' fill='white' font-family='Arial, sans-serif'%3E👟%3C/text%3E%3Ctext x='50%25' y='90%25' font-size='14' text-anchor='middle' dy='.3em' fill='rgba(255,255,255,0.8)' font-family='Arial, sans-serif'%3EIconique%3C/text%3E%3C/svg%3E",
          description: "Baskets iconiques au design intemporel",
          inStock: true,
        },
      ];

      let selectedPaymentMethod = null;
      let promoCodeApplied = false;

      // Initialize cart
      function initializeCart() {
        renderCartItems();
        updateOrderSummary();
      }

      function renderCartItems() {
        const container = document.getElementById("cartItems");
        container.innerHTML = cartItems
          .map((item, index) => {
            const discountPercentage = item.originalPrice
              ? Math.round((1 - item.price / item.originalPrice) * 100)
              : 0;

            return `
                    <div class="cart-item glass-effect rounded-2xl p-6 border border-neutral-200 dark:border-neutral-700 animate-fade-in" style="animation-delay: ${
                      index * 0.1
                    }s">
                        <div class="flex items-center space-x-6">
                            <!-- Product Image -->
                            <div class="relative flex-shrink-0">
                                <img src="${item.image}" alt="${
              item.name
            }" class="w-24 h-24 object-cover rounded-xl shadow-float">
                                ${
                                  discountPercentage > 0
                                    ? `<span class="absolute -top-2 -right-2 bg-gradient-to-r from-red-500 to-red-600 text-white text-xs font-bold px-2 py-1 rounded-full shadow-glow">-${discountPercentage}%</span>`
                                    : ""
                                }
                            </div>

                            <!-- Product Details -->
                            <div class="flex-1 min-w-0">
                                <h4 class="text-lg font-bold text-neutral-900 dark:text-white mb-1">${
                                  item.name
                                }</h4>
                                <p class="text-sm text-neutral-600 dark:text-neutral-400 mb-3">${
                                  item.description
                                }</p>
                                
                                <div class="flex items-center space-x-4">
                                    <div class="flex items-center space-x-2">
                                        <span class="text-xl font-bold text-neutral-900 dark:text-white">${
                                          item.price
                                        }€</span>
                                        ${
                                          item.originalPrice
                                            ? `<span class="text-sm text-neutral-500 dark:text-neutral-400 line-through">${item.originalPrice}€</span>`
                                            : ""
                                        }
                                    </div>
                                    <span class="text-xs ${
                                      item.inStock
                                        ? "text-green-600 dark:text-green-400"
                                        : "text-red-600 dark:text-red-400"
                                    } font-medium">
                                        ${
                                          item.inStock
                                            ? "✓ En stock"
                                            : "✗ Rupture"
                                        }
                                    </span>
                                </div>
                            </div>

                            <!-- Quantity Controls -->
                            <div class="flex items-center space-x-3">
                                <button onclick="updateQuantity(${
                                  item.id
                                }, -1)" class="morph-button w-10 h-10 bg-neutral-100 dark:bg-neutral-800 hover:bg-neutral-200 dark:hover:bg-neutral-700 rounded-xl flex items-center justify-center transition-all hover:scale-110">
                                    <i class="fas fa-minus text-sm"></i>
                                </button>
                                <input type="number" value="${
                                  item.quantity
                                }" min="1" max="10" 
                                       class="quantity-input w-16 h-10 text-center border border-neutral-300 dark:border-neutral-600 rounded-xl bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white font-semibold focus:ring-2 focus:ring-primary-500 focus:border-primary-500"
                                       onchange="updateQuantity(${
                                         item.id
                                       }, 'set', this.value)">
                                <button onclick="updateQuantity(${
                                  item.id
                                }, 1)" class="morph-button w-10 h-10 bg-neutral-100 dark:bg-neutral-800 hover:bg-neutral-200 dark:hover:bg-neutral-700 rounded-xl flex items-center justify-center transition-all hover:scale-110">
                                    <i class="fas fa-plus text-sm"></i>
                                </button>
                            </div>

                            <!-- Remove Button -->
                            <button onclick="removeItem(${
                              item.id
                            })" class="morph-button p-3 text-neutral-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-all hover:scale-110">
                                <i class="fas fa-trash text-lg"></i>
                            </button>
                        </div>
                    </div>
                `;
          })
          .join("");
      }

      function updateQuantity(itemId, change, setValue = null) {
        const item = cartItems.find((item) => item.id === itemId);
        if (!item) return;

        if (setValue !== null) {
          item.quantity = Math.max(1, Math.min(10, parseInt(setValue)));
        } else {
          item.quantity = Math.max(1, Math.min(10, item.quantity + change));
        }

        renderCartItems();
        updateOrderSummary();
        showToast(`Quantité mise à jour: ${item.name}`, "info");
      }

      function removeItem(itemId) {
        const itemIndex = cartItems.findIndex((item) => item.id === itemId);
        if (itemIndex === -1) return;

        const item = cartItems[itemIndex];

        // Show custom confirmation dialog instead of confirm()
        showConfirmDialog(
          `Êtes-vous sûr de vouloir supprimer "${item.name}" de votre panier ?`,
          () => {
            cartItems.splice(itemIndex, 1);
            renderCartItems();
            updateOrderSummary();
            showToast(`${item.name} supprimé du panier`, "info");

            // Update cart badge
            const badge = document.querySelector(".animate-bounce-gentle");
            if (badge) {
              badge.textContent = cartItems.length;
            }
          }
        );
      }

      function updateOrderSummary() {
        const subtotal = cartItems.reduce(
          (sum, item) => sum + item.price * item.quantity,
          0
        );
        const tax = Math.round(subtotal * 0.2);
        let total = subtotal + tax;

        if (promoCodeApplied) {
          total = total * 0.85; // 15% discount
        }

        document.getElementById("subtotal").textContent = subtotal + "€";
        document.getElementById("tax").textContent = tax + "€";
        document.getElementById("total").textContent = Math.round(total) + "€";
      }

      function applyPromoCode() {
        const code = document
          .getElementById("promoCode")
          .value.trim()
          .toUpperCase();
        const validCodes = ["LUXE15", "WELCOME", "PREMIUM"];

        if (validCodes.includes(code)) {
          promoCodeApplied = true;
          document.getElementById("promoDiscount").style.display = "flex";
          updateOrderSummary();
          showToast(`Code promo "${code}" appliqué avec succès!`, "success");
          document.getElementById("promoCode").value = "";
        } else {
          showToast("Code promo invalide", "error");
        }
      }

      function selectPaymentMethod(element) {
        // Remove selection from all payment methods
        document.querySelectorAll(".payment-method").forEach((method) => {
          method.classList.remove("selected");
        });

        // Add selection to clicked method
        element.classList.add("selected");
        selectedPaymentMethod = element.querySelector("p").textContent;

        showToast(
          `Méthode de paiement sélectionnée: ${selectedPaymentMethod}`,
          "info"
        );
      }

      function processPayment() {
        if (!selectedPaymentMethod) {
          showToast("Veuillez sélectionner une méthode de paiement", "warning");
          return;
        }

        if (cartItems.length === 0) {
          showToast("Votre panier est vide", "warning");
          return;
        }

        // Simulate payment processing
        const button = event.target;
        const originalText = button.innerHTML;

        button.innerHTML =
          '<i class="fas fa-spinner fa-spin mr-2"></i>Traitement en cours...';
        button.disabled = true;

        setTimeout(() => {
          // Show success modal
          document.getElementById("successModal").classList.remove("hidden");
          showToast("Paiement effectué avec succès! 🎉", "success");

          // Reset button
          button.innerHTML = originalText;
          button.disabled = false;
        }, 3000);
      }

      function closeSuccessModal() {
        document.getElementById("successModal").classList.add("hidden");
      }

      function showToast(message, type = "info") {
        const toast = document.createElement("div");
        const icons = {
          success: "fas fa-check-circle text-green-500",
          error: "fas fa-exclamation-circle text-red-500",
          warning: "fas fa-exclamation-triangle text-yellow-500",
          info: "fas fa-info-circle text-blue-500",
        };

        const colors = {
          success:
            "bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800",
          error:
            "bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800",
          warning:
            "bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800",
          info: "bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",
        };

        toast.className = `toast glass-card rounded-2xl p-4 shadow-float border-2 ${colors[type]} flex items-center space-x-3 min-w-80`;
        toast.innerHTML = `
                <i class="${icons[type]} text-lg"></i>
                <span class="font-medium text-neutral-800 dark:text-neutral-200">${message}</span>
                <button onclick="this.parentElement.remove()" class="ml-auto text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-300 transition-colors">
                    <i class="fas fa-times"></i>
                </button>
            `;

        document.getElementById("toastContainer").appendChild(toast);

        // Show toast
        setTimeout(() => toast.classList.add("show"), 100);

        // Auto remove after 4 seconds
        setTimeout(() => {
          toast.classList.remove("show");
          setTimeout(() => toast.remove(), 300);
        }, 4000);
      }

      function showConfirmDialog(message, onConfirm) {
        const modal = document.createElement("div");
        modal.className =
          "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50";
        modal.innerHTML = `
                <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg max-w-sm w-full mx-4 animate-zoom-in">
                    <p class="text-gray-700 dark:text-gray-300 mb-4">${message}</p>
                    <div class="flex justify-end space-x-3">
                        <button class="px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded" onclick="this.closest('.fixed').remove()">Annuler</button>
                        <button class="px-4 py-2 bg-red-500 text-white hover:bg-red-600 rounded" onclick="this.closest('.fixed').remove(); (${onConfirm})()">Confirmer</button>
                    </div>
                </div>
            `;
        document.body.appendChild(modal);
      }

      // ================================
      // 🤖 AI ASSISTANT FUNCTIONALITY
      // ================================

      const aiToggle = document.getElementById("aiToggle");
      const aiChat = document.getElementById("aiChat");
      const aiClose = document.getElementById("aiClose");
      const aiInput = document.getElementById("aiInput");
      const aiSend = document.getElementById("aiSend");
      const aiMessages = document.getElementById("aiMessages");

      let isAiOpen = false;

      // AI Chat functionality
      aiToggle.addEventListener("click", () => {
        isAiOpen = !isAiOpen;
        if (isAiOpen) {
          aiChat.classList.remove("hidden");
          aiChat.classList.add("animate-scale-in");
          showToast("Assistant paiement activé! 🤖", "info");
        } else {
          aiChat.classList.add("hidden");
        }
      });

      aiClose.addEventListener("click", () => {
        isAiOpen = false;
        aiChat.classList.add("hidden");
      });

      aiSend.addEventListener("click", sendAiMessage);
      aiInput.addEventListener("keypress", (e) => {
        if (e.key === "Enter") sendAiMessage();
      });

      function sendAiMessage() {
        const message = aiInput.value.trim();
        if (!message) return;

        // Add user message
        addAiMessage(message, "user");
        aiInput.value = "";

        // Simulate AI thinking
        setTimeout(() => {
          const response = generateAiResponse(message);
          addAiMessage(response, "ai");
        }, 1000 + Math.random() * 2000);
      }

      function addAiMessage(message, sender) {
        const messageEl = document.createElement("div");
        messageEl.className = `${sender}-message flex items-start space-x-3 animate-fade-in`;

        if (sender === "user") {
          messageEl.innerHTML = `
                    <div class="w-8 h-8 bg-gradient-to-r from-green-500 to-green-600 rounded-full flex items-center justify-center text-white text-sm">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="bg-primary-100 dark:bg-primary-900/30 rounded-2xl p-4 max-w-xs">
                        <p class="text-sm">${message}</p>
                    </div>
                `;
        } else {
          messageEl.innerHTML = `
                    <div class="w-8 h-8 bg-gradient-to-r from-primary-500 to-purple-600 rounded-full flex items-center justify-center text-white text-sm">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="bg-neutral-100 dark:bg-neutral-800 rounded-2xl p-4 max-w-xs">
                        <p class="text-sm">${message}</p>
                    </div>
                `;
        }

        aiMessages.appendChild(messageEl);
        aiMessages.scrollTop = aiMessages.scrollHeight;
      }

      function generateAiResponse(message) {
        const lowerMessage = message.toLowerCase();

        if (
          lowerMessage.includes("livraison") ||
          lowerMessage.includes("délai")
        ) {
          return "🚚 Excellente question ! Votre commande sera livrée gratuitement sous 24-48h. Vous recevrez un suivi par email et SMS.";
        }

        if (
          lowerMessage.includes("paiement") ||
          lowerMessage.includes("sécur")
        ) {
          return "🔒 Votre paiement est 100% sécurisé avec un chiffrement SSL 256-bit. Nous acceptons Visa, Mastercard, PayPal et Apple Pay.";
        }

        if (
          lowerMessage.includes("retour") ||
          lowerMessage.includes("remboursement")
        ) {
          return "↩️ Pas de souci ! Vous avez 30 jours pour retourner vos articles. Le remboursement est traité sous 3-5 jours ouvrés.";
        }

        if (lowerMessage.includes("promo") || lowerMessage.includes("code")) {
          return "🎟️ Utilisez LUXE15 pour 15% de réduction ou WELCOME pour la livraison gratuite ! Les codes sont cumulables avec certaines offres.";
        }

        if (
          lowerMessage.includes("stock") ||
          lowerMessage.includes("disponible")
        ) {
          return "📦 Tous les articles de votre panier sont en stock ! Votre commande sera préparée immédiatement après validation du paiement.";
        }

        if (lowerMessage.includes("facture") || lowerMessage.includes("reçu")) {
          return "🧾 Votre facture sera envoyée par email dès la validation de votre commande. Vous pourrez aussi la télécharger depuis votre compte.";
        }

        return "🤖 Je suis là pour vous aider avec votre commande ! Posez-moi des questions sur la livraison, le paiement, les retours ou nos promotions.";
      }

      // ================================
      // 🌟 NEURAL NETWORK BACKGROUND
      // ================================

      const canvas = document.getElementById("neuralCanvas");
      const ctx = canvas.getContext("2d");
      let animationFrame;

      // Neural network nodes
      const nodes = [];
      const connections = [];

      function initNeuralNetwork() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // Create nodes
        for (let i = 0; i < 30; i++) {
          nodes.push({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height,
            vx: (Math.random() - 0.5) * 1,
            vy: (Math.random() - 0.5) * 1,
            radius: Math.random() * 2 + 1,
          });
        }
      }

      function animateNeuralNetwork() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Update and draw nodes
        nodes.forEach((node) => {
          node.x += node.vx;
          node.y += node.vy;

          if (node.x < 0 || node.x > canvas.width) node.vx *= -1;
          if (node.y < 0 || node.y > canvas.height) node.vy *= -1;

          ctx.beginPath();
          ctx.arc(node.x, node.y, node.radius, 0, Math.PI * 2);
          ctx.fillStyle = "rgba(93, 92, 222, 0.4)";
          ctx.fill();
        });

        // Draw connections
        for (let i = 0; i < nodes.length; i++) {
          for (let j = i + 1; j < nodes.length; j++) {
            const distance = Math.hypot(
              nodes[i].x - nodes[j].x,
              nodes[i].y - nodes[j].y
            );

            if (distance < 120) {
              ctx.beginPath();
              ctx.moveTo(nodes[i].x, nodes[i].y);
              ctx.lineTo(nodes[j].x, nodes[j].y);
              ctx.strokeStyle = `rgba(93, 92, 222, ${
                0.2 * (1 - distance / 120)
              })`;
              ctx.lineWidth = 1;
              ctx.stroke();
            }
          }
        }

        animationFrame = requestAnimationFrame(animateNeuralNetwork);
      }

      // Magnetic effect for interactive elements
      document.addEventListener("mousemove", function (e) {
        document.querySelectorAll(".magnetic").forEach((element) => {
          const rect = element.getBoundingClientRect();
          const x = e.clientX - rect.left - rect.width / 2;
          const y = e.clientY - rect.top - rect.height / 2;
          const distance = Math.sqrt(x * x + y * y);

          if (distance < 100) {
            const strength = (100 - distance) / 100;
            element.style.transform = `translate(${x * strength * 0.1}px, ${
              y * strength * 0.1
            }px)`;
          } else {
            element.style.transform = "translate(0, 0)";
          }
        });
      });

      // Initialize everything
      document.addEventListener("DOMContentLoaded", function () {
        initializeCart();
        initNeuralNetwork();
        animateNeuralNetwork();

        showToast(
          "🛒 Panier intelligent chargé! Finalisez votre commande en toute sécurité.",
          "success"
        );
      });

      // Cleanup on page unload
      window.addEventListener("beforeunload", function () {
        if (animationFrame) {
          cancelAnimationFrame(animationFrame);
        }
      });

      // Resize handler for neural network
      window.addEventListener("resize", function () {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      });
    </script>
  </body>
</html>
